title: anonymous.times
server:
  dev:
    host: localhost
    port: 5050
  prod:
    host: 10.35.16.38
    port: 80
project:
  folder: (env) => env.path.resolve(env.process.cwd(), '../Source')
webscript:
  folder: (env) => env.path.join(env.process.cwd(), "../../../Shared/WebScript")
websiteHost:
  folder: (env) => env.path.resolve(env.process.cwd(), '../../WebsiteHost')
static:
  folder: (env) => env.process.cwd()
handler: | #js
  (ctx) => {
    return async (req, res) => {

    const db = await ctx.Database.new({ path: `../Database/Ynet` });

      if (req.url === '/articles') {
        let articles = await db.find("Articles.Hebrew", {});

        for (const article of articles) {
            Object.assign(article, article.hebrew);
            delete article.hebrew;
            delete article.hungarian;
        }

        articles = articles.filter(article => article.title?.length);

        return res.end(JSON.stringify(articles));
      }
    };
  }
