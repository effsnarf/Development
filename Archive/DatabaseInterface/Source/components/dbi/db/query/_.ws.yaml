dom:
  .flex.gap-2:
    div:
      :style: "{width: '40vw'}"
      ui.input.text.box:
        :multiline: "true"
        :auto-resize: "true"
        hint: Ask your database anything…
        v-model: prompt
      .flex.gap-1.justify-center.items-center:
        transition:
          name: slide
          ui.button:
            v-if: canExecute
            text: Send ✔️
            :click: promptToTask
        transition:
          name: slide
          ui.elapsed:
            v-if: is.loading
props:
  dbp: null
  entities: null

data:
  prompt: null
  task: null
  is:
    loading: false

mounted: | #js
  async function() {
  }

methods:
  promptToTask: | #js
    async function() {
      this.is.loading = true;
      await this.$root.wait(() => this.entities);
      this.task = null;
      const task = (await (await fetch(`/api/prompt/to/task`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          entities: this.entities,
          prompt: this.prompt
        })
      })).json());
      task.id = Date.now();
      this.$emit("new-task", task);
      this.is.loading = false;
    }

computed:
  canExecute: | #js
    function() {
      return this.prompt?.length > 0;
    }

watch:

style:
  textarea:
    color: lightgreen
  .box1:
    background: "#ffffff20"
    padding: 0.5em
    cursor: pointer
  .box1:hover:
    background: "#ffffff30"
