dom:
  grid.module:
    icon: ðŸ“¦
    ':show-title': 'false'
    ui.window:
      ':rect': box.rect
      ':surface-element': surfaceElement
      ':center-coords': 'true'
      @drag-stop: onDragStop
      template: 
        v-slot: title
        grid.ui.box.header:
          ':box': box
          ':box-icon': boxIcon
      template: 
        v-slot: content
        div:
          component:
            ':is': getBoxCompName(box)
            ':box': box
            @update:icon: boxIcon = $event
          grid.ui.box.type.picker:
            v-if: '!box.type'
            ':box': box
            @input: onChangeType
props:
  box: null
  surfaceElement: null
data:
  boxIcon: null
methods:
  getBoxTitle: | #js
    function(box) {
      return box.type;
    }
  getBoxCompName: | #js
    function(box) {
      if (!box.type) return null;
      return `grid.ui.box.${box.type}`.replace(/\./g, "-");
    }
  onDragStop: | #js
    function(rect, dragType) {
      if (dragType === "resize")
      {
        this.$femit("resize.box", this.box._id, rect.size);
      }
      else
      {
        this.$femit("move.box", this.box._id, rect.pos);
      }
    }
  onChangeType: | #js
    function(type) {
      const boxData = { type };
      if (!this.box.name) boxData.name = type;
      this.$femit("edit.box", this.box._id, boxData);
    }
  yamlify: | #js
    function(obj) {
      return jsyaml.dump(obj);
    }
watch:
  box:
    handler: | #js
      async function(box) {
      }
    immediate: true
    deep: true
_:
  examples:
    count: 0
style:
  .box2:
    margin: 0
    border: none
name: grid-ui-box
template: >-
  <grid-module class="comp-grid-ui-box" icon="ðŸ“¦" :show-title="false"
  path="1671629593."><ui-window :rect="box.rect"
  :surface-element="surfaceElement" :center-coords="true"
  @drag-stop="onDragStop" path="1671629593.0"><template v-slot:title
  path="1671629593.0.0"><grid-ui-box-header :box="box" :box-icon="boxIcon"
  path="1671629593.0.0.0"></grid-ui-box-header></template><template
  v-slot:content path="1671629593.0.1"><div path="1671629593.0.1.0"><component
  :is="getBoxCompName(box)" :box="box" @update:icon="boxIcon = $event"
  path="1671629593.0.1.0.0"></component><grid-ui-box-type-picker
  v-if="!box.type" :box="box" @input="onChangeType"
  path="1671629593.0.1.0.1"></grid-ui-box-type-picker></div></template></ui-window></grid-module>
