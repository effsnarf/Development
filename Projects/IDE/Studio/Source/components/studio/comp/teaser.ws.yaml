dom:
  .teaser:
    class: show-on-hover-container
    .comp:
      component:
        ref: comp1
        ':is': getExampleCompName(comp)
    hr: null
    div: 
      .flex:
        class: show-on-hover
        h3: 
          ui.title:
            icon: ðŸ“¦
            ':text': comp.name
      .show-on-hover:
        ui.tabs:
          ':options': '[''ðŸ§Š props'', ''âœï¸ example'', ''ðŸ’¾ download'']'
          direction: horizontal
          template: 
            v-slot: tab0
            studio.comp.props:
              ':comp': comp
              ':vue': () => getExampleVue()
          template: 
            v-slot: tab1
            div: 
              pre:
                class: example-source
                v-text: exampleSource
          template: 
            v-slot: tab2
            h3: 
              v-text: '''Download'''
props:
  comp: null
data:
  key1: 1
mounted: | #js
  async function() {
    setTimeout(this.refresh.bind(this), 400);
  }
methods:
  getExampleComp: | #js
    function (comp) {
      const compName = this.getExampleCompName(comp)?.replaceAll('-', '.');
      if (!compName) return null;
      return this.$root.comps.find(c => (c.name == compName));
    }
  getExampleCompName: | #js
    function (comp) {
      if (!comp) return null;
      return `${comp.name}.example0`.kebabize();
    }
  getPropDesc: | #js
    function (propName) {
      if (!this.comp.source.desc) return null;
      const desc = this.comp.source.desc[propName];
      const value = this.getPropValue(propName);
      if ((typeof desc == "object"))
      {
        return Object.keys(desc).map(k => `${k}: ${desc[k]}`).join('\n');
      }
      return desc;
    }
  getExampleVues: | #js
    function () {
      if (!this.$refs.comp1) return [];
      if (!this.comp) return [];
      const vues = this.$root.vm.getDescendants(this.$refs.comp1, this.comp.name);
      return vues;
    }
  getExampleVue: | #js
    function () {
      const vues = this.getExampleVues();
      if (vues?.length != 1) return null;
      return vues[0];
    }
  toYaml: | #js
    function (value) {
      return jsyaml.dump(value);
    }
  refresh: | #js
    function () {
      this.key1++;
    }
computed:
  exampleSource: | #js
    function () {
      let source = this.getExampleComp(this.comp)?.source;
      if (!source) return null;
      source = Objects.clone(source);
      ["name", "style", "template", "_"].forEach(k => delete source[k]);
      let yaml = this.toYaml(source);
      yaml = yaml.replaceAll(['o', 'n', '_'].join(''), ['@', 'o', 'n'].join(''));
      return yaml;
    }
  showExampleSource: | #js
    function () {
      return this.getExampleVues()?.length != 1;
    }
style:
  .show-on-hover-container .show-on-hover:
    max-height: 0
    opacity: 0
  .show-on-hover-container:hover .show-on-hover:
    max-height: 25rem
    opacity: 1
  tr:hover:
    background: '#ffffff20'
    transition: 0s
  .example-source:
    width: 20em
    height: 20em
    overflow: auto
  table:
    font-family: monospace
  .comp:
    height: 100%
    display: flex
    justify-content: center
    align-items: center
  .teaser:
    aspect-ratio: 3 / 2
  .teaser:hover:
    border: '1px solid #ffffff20'
    margin-bottom: 3em
name: studio-comp-teaser
_:
  examples:
    count: 0
template: >-
  <div class="comp-studio-comp-teaser show-on-hover-container teaser"
  path="-577615369."><div class="comp" path="-577615369.0"><component
  ref="comp1" :is="getExampleCompName(comp)"
  path="-577615369.0.0"></component></div><div path="-577615369.1"><div
  class="show-on-hover flex" path="-577615369.1.0"><h3
  path="-577615369.1.0.0"><ui-title icon="ðŸ“¦" :text="comp.name"
  path="-577615369.1.0.0.0"></ui-title></h3></div><div class="show-on-hover"
  path="-577615369.1.1"><ui-tabs :options="['ðŸ§Š props', 'âœï¸ example', 'ðŸ’¾
  download']" direction="horizontal" path="-577615369.1.1.0"><template
  v-slot:tab0 path="-577615369.1.1.0.0"><studio-comp-props :comp="comp" :vue="()
  =&gt; getExampleVue()"
  path="-577615369.1.1.0.0.0"></studio-comp-props></template><template
  v-slot:tab1 path="-577615369.1.1.0.1"><div path="-577615369.1.1.0.1.0"><pre
  class="example-source" v-text="exampleSource"
  path="-577615369.1.1.0.1.0.0"></pre></div></template><template v-slot:tab2
  path="-577615369.1.1.0.2"><h3 v-text="'Download'"
  path="-577615369.1.1.0.2.0"></h3></template></ui-tabs></div></div></div>
