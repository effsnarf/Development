dom:
  div:
    ui.select:
      :class: "{ dimmed: is.loading }"
      ":options": dbNames
      :get-item-icon: () => 'üìÅ'
      input-type: value
      v-model: selectedDbName

data:
  dbNames: null
  selectedDbName: null
  is:
    loading: false

mounted: | #js
  async function() {
    this.dbNames = (await (await fetch(this.urlBase)).json());
  }

computed:
  urlBase: | #js
    function() {
      return this.$root.dbp.urlBase.split('/').slice(0, 3).join('/');
    }

watch:
  selectedDbName: | #js
    async function(selectedDbName) {
      this.$emit('input', null);
      this.is.loading = true;
      const url = `${this.urlBase}/${selectedDbName}`;
      const dbp = (await DatabaseProxy.new(url));
      this.is.loading = false;
      this.$emit('input', dbp);
    }
