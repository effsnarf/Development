dom:
  div:
    ui.loading:
      v-if: isLoading
    ui.value:
      :value: entities
      :visible-fields: "['name', 'count']"
      @array-item-click: selectEntity
    ui.select:
      v-if: "false"
      ":options": entities
      :get-item-text: (entity) => entity.name
      :get-item-icon: () => 'ðŸ“'
      input-type: value
      v-model: selectedEntity

data:
  entities: null
  selectedEntity: null
  isLoading: false

mounted: | #js
  async function() {
    this.$watch(() => this.$root.dbp, this.refresh.bind(this));
  }

methods:
  selectEntity: | #js
    function(entity) {
      this.selectedEntity = entity;
    }
  refresh: | #js
    async function() {
      this.isLoading = true;
      this.entities = (await this.$root.dbp.get.entity.infos());
      this.isLoading = false;
    }

watch:
  selectedEntity: | #js
    function(selectedEntity) {
      this.$emit("input", selectedEntity);
    }