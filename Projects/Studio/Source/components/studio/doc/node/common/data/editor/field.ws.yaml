dom:
  div:
    h2:
      v-text: "'üßäüçÉ ' + (nodeVar.exp ?? '')"
    div:
      ui.input.field:
        :data-items: sui.selected.dataItems
        :value: initial.exp
        @preview: previewField
        @input: selectField

props:
  node:
  nodeVar:
  sui:

data:
  initial:

mounted: | #js
  function() {
    this.$root.e.on("app.node.changed", this.init.bind(this));
  }

methods:
  init: | #js
    function() {
      this.initial = Objects.clone(this.nodeVar);
    }
  previewField: | #js
    function(value) {
      this.nodeVar.exp = (value || this.initial.exp);
      this.$root.e.emit("app.node.preview", this.node);
    }
  selectField: | #js
    function(value) {
      this.nodeVar.exp = this.initial.exp;
      this.$root.do("edit.node.var", { node: this.node, varName: this.nodeVar.name, key: "exp", value });
    }

watch:
  nodeVar:
    immediate: true
    handler: | #js
      function(nodeVar) {
        this.init();
      }

style:
  h2:
    min-height: 1.2em
    overflow: hidden
  td:nth-child(1):
    width: 2em
