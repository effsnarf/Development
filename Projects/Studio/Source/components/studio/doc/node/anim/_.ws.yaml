dom:
  ui.anim:
    :anim: (node.animation?.preview ?? node.animation?.anim)
    :anim-state: animState
    :duration: "(node.animation?.duration)"
    :item-index: itemIndex
    :items-count: itemsCount
    :auto-play-loop: "(!!node.animation?.preview)"
    slot:

props:
  node:
  itemIndex: 0
  itemsCount: 1
  sui:

data:
  animState:
  nodePage: null

mounted: | #js
  function() {
    this.$watch("sui.page.selected", this.onSelectedPageChanged.bind(this));
  }

methods:
  onSelectedPageChanged: | #js
    function(newPage, oldPage) {
      const page = (this.nodePage ?? (this.nodePage = this.$root.getNodePage(this)));
      this.animState = (!page) ? null :
        (page.id == oldPage?.id) ? "leaving" :
        (page.id == newPage?.id) ? "entering" : null;
    }
