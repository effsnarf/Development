dom:
  div:
    h2:
      v-text: "'user app'"
    studio.doc:
      :user-app: userApp
      :user-app-state: $data
      :sui: sui
    studio.app.runtime.common:
      ref: common1
    ui.linq.evaluator:
      ref: linqEval1

props:
  userApp:
  sui:

methods:
  fetchFromUrl: | #js
    async function(url, linq) {
      const ticker = Ticker.alertify((elapsed) => `<h2>‚è≥ ${elapsed.unitifyTime()}</h2> ${url}`)
      const text = (await (await fetch(`/fetch?url=${url}`)).text());
      ticker.stop();
      // #TODO lame
      try {
        const obj = JSON.parse(text);
        const datas = this.$refs.linqEval1.evaluateOps(null, obj, linq);
        return datas.last();
      }
      catch { return text; }
    }
