dom:
  div:
    table:
      tbody:
        tr:
          v-for: action in [...actions].reverse()
          :class: getActionClass(action)
          @mouseenter: () => hovered.action = action
          @mouseleave: () => hovered.action = null
          @click: selectAction(action)
          td:
            class: dimmed
            v-text: action.id
          td:
            v-text: getActionIcon(action.do.type)
          td:
            v-text: action.do.icon
          td:
            v-text: (action.do.text ?? action.do.type)
    transition:
      name: slide
      .box2:
        v-if: selected.action
        pre:
          v-text: selected.action.do
        pre:
          v-text: selected.action.undo

props:
  actions:
  pointer:

data:
  hovered:
    action: null
  selected:
    action: null

methods:
  selectAction: | #js
    function(action) {
      if (action == this.selected.action) action = null;
      this.selected.action = action;
    }
  getActionIcon: | #js
    function(type) {
      type = type.split('.').first();
      return {
        "select": "üëÜ",
        "create": "‚ûï",
        "edit": "‚úèÔ∏è",
        "delete": "‚ùå",
      }[type] || "‚ùî";
    }
  getActionClass: | #js
    function(action) {
      const cls = {};
      const type = this.getActionType(action);
      cls.done = (action._i <= this.pointer);
      cls[`type-${type}`] = true;
      cls.selected = (action == this.selected.action);
      return cls;
    }
  getActionType: | #js
    function(action) {
      const type = action.do.type.split('.').first();
      return type;
    }

style:
  .type-select:
    color: "#ffffff80"
  tr:hover:
    background-color: "#80808040"
  tr.done:hover:
    background-color: "#808080a0"
  tr:not(.done):
    opacity: 0.5
  td:nth-child(1), td:nth-child(2), td:nth-child(3):
    width: 1.5em
  .done:
    background-color: "#80808080"
    border-radius: 0
  .done td:
    padding: 0.2em 0.3em
  .done:first-child td:first-child:
    border-radius: 0.5em 0 0 0
  .done:first-child td:last-child:
    border-radius: 0 0.5em 0 0
  .done:last-child td:first-child:
    border-radius: 0 0 0 0.5em
  .done:last-child td:last-child:
    border-radius: 0 0 0.5em 0

