dom:
  .post:
    v-if: item
    ':class': '{ enlarged: isEnlarged }'
    .post-media:
      v-if: item.media
      ':class': getPostMediaClass(item.media)
      e.media:
        ':item': item.media
        @click-media-content: onClickMediaContent
    .post-text:
      div: 
        v-html: >-
          $root.textToHtml(item.text, { firstLine: ((item.index!=0) ? null :
          'post-title') })
    div: 
      class: clear-both
    e.post.menu:
      ':item': item
      @thread-updated: $emit('thread-updated')
props:
  item: null
  teaser: false
data:
  enlarged: false
methods:
  onClickMediaContent: | #js
    function () {
      this.enlarged = !this.enlarged;
    }
  getPostMediaClass: | #js
    function (media) {
      if (!media) return null;
      const cls = [];
      cls.push(`media-${media.type}`);
      if (this.teaser) cls.push("teaser");
      return cls;
    }
computed:
  isEnlarged: | #js
    function () {
      return ((this.item.index == 0) || this.enlarged);
    }
style:
  .teaser:
    max-height: 15rem
    overflow: hidden
  .teaser:hover:
    max-height: 30rem
  .comp-e-post-menu:
    max-height: 0
    overflow: hidden
  .post:hover .comp-e-post-menu:
    max-height: 5em
  .post:
    background: '#ffffff20'
    border: 2px solid gray
    box-shadow: 'inset -6px 6px 2px #000'
    z-index: 10
  .post .post-menu:
    max-height: 0
    overflow: hidden
    opacity: 0
    transform: translateY(-1em)
  .post:hover .post-menu:
    max-height: 5em
    transition: 0.5s linear
    opacity: 1
    transform: translateY(0)
  .post .instance:hover:
    border: '1px solid #000000a0'
    transition: 0s !important
  .post .comp-e-media-recaption:
    max-height: 0
    overflow: hidden
    opacity: 0
  .post.enlarged .comp-e-media-recaption:
    max-height: 40em
    opacity: 1
  .larping-generator:
    width: 4rem !important
    float: left
    margin-right: 1em
    margin-bottom: 1em
  .post-media:
    float: left
    width: 50%
    padding: 0.5em
    filter: grayscale(0.5)
    cursor: pointer
    z-index: 10
  .post-media.media-feel:
    width: fit-content
    margin: 0.5em
  .post-media:hover, .enlarged .post-media:
    filter: none
  .post-media a:
    cursor: pointer !important
  .comp-e-instance .footer:
    display: none
  .post-title:
    font-size: 140%
  .post-text:
    padding: 0.5rem
    opacity: 0.9
  .enlarged .post-media:
    width: 100%
  .enlarged .post-text: null
  .anonymous:
    display: none
  .greentext:
    color: '#35c735'
name: e-post
template: >-
  <div class="comp-e-post post" v-if="item" :class="{ enlarged: isEnlarged }"
  path="-1357494135."><div class="post-media" v-if="item.media"
  :class="getPostMediaClass(item.media)" path="-1357494135.0"><e-media
  :item="item.media" @click-media-content="onClickMediaContent"
  path="-1357494135.0.0"></e-media></div><div class="post-text"
  path="-1357494135.1"><div v-html="$root.textToHtml(item.text, { firstLine:
  ((item.index!=0) ? null : 'post-title') })"
  path="-1357494135.1.0"></div></div><div class="clear-both"
  path="-1357494135.2"></div><e-post-menu :item="item"
  @thread-updated="$emit('thread-updated')"
  path="-1357494135.3"></e-post-menu></div>
