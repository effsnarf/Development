dom:
  div:
    component:
      ':is': formatComponentName
      ':media': media
    ui.share:
      ':item': media
props:
  item: null
  mediaID: null
data:
  media: null
  temp: null
  formatComponentName: null
methods:
  getFormatComponentName: | #js
    async function (media) {
      if (!media) return;
      const builder = await this.$root.getBuilder(this.media.builderID);
      return `e-format-${builder.format.replace(/\./g, '-')}`;
    }
computed: null
watch:
  media:
    handler: | #js
      async function (media) {
        this.formatComponentName = await this.getFormatComponentName(media);
      }
    immediate: true
  item:
    handler: | #js
      function (item) {
        this.media = item;
      }
    immediate: true
  mediaID:
    handler: | #js
      async function (mediaID) {
        if (this.item) return;
        this.media = !mediaID ? null : await this.$root.dbp.medias.select.one(mediaID);
      }
    immediate: true
name: e-media
template: >-
  <div class="comp-e-media" path="864271643."><component
  :is="formatComponentName" :media="media"
  path="864271643.0"></component><ui-share :item="media"
  path="864271643.1"></ui-share></div>
