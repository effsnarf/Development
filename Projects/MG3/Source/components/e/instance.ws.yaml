dom:
  div:
    v-if: item
    ui.link:
      class: instance
      div:
        ui.image:
          ref: image1
          ':imageID': item.imageID || item.generator?.imageID
          on_change: updateImageSize
        .texts:
          .text:
            v-for: (text, index) in [item.text0, item.text1]
            v-text: text
            ':style': '{ fontSize: fontSizes[index] }'
        div:
          class: spacer
    on_click: $emit('click')
    e.post.create:
      v-if: showCreatePost
      ':generator': $root.instanceToGenerator(item)
      ':entityID': item._id
name: e-instance
props:
  item: null
  showCreatePost: true
data:
  width: null
methods:
  getFontSize: | #js

    function (s) {
      if (!s) return 0;
      if (!this.width) return 0;
      const size = Math.min(3, Math.max(14, (36 - (s.length / 6))) / 50 *  this.width / 150);
      return `${size*2.5}vh`;
    }
  updateImageSize: | #js

    function () {
      this.width = this.$refs.image1.width;
    }
computed:
  showGenerator: | #js

    function () {
      if (this.item.urlName == this.$root.params.urlName) return false;
      return true;
    }
  fontSizes: | #js

    function () {
      const sizes = [this.getFontSize(this.item.text0), this.getFontSize(this.item.text1)];
      return sizes;
    }
style:
  .instance:
    display: block
    box-shadow: '0px 10px 10px #000000a0'
  .footer:
    display: flex
    margin-top: 1rem
    justify-content: center
  .admin-footer:
    display: flex
    justify-content: center
    margin-top: 1rem
  .comp-e-post-create:
    margin-top: 1rem !important
  .comp-ui-image, img:
    aspect-ratio: 1
    object-fit: cover
  .instance .comp-ui-image, .texts, .text:
    position: absolute
  .spacer, .texts:
    width: 100%
    aspect-ratio: 1
  .text:
    text-align: center
    display: block
    width: 100%
    top: 0
    overflow: hidden
    color: '#fff'
    line-height: 1.2em
    font-family: Impact,Oswald
    text-transform: uppercase
    text-shadow: '-2px -2px 0 #000, 2px -2px 0 #000, -2px 2px 0 #000, 2px 2px 0 #000'
    '-webkit-font-smoothing': antialiased
    box-sizing: border-box
    padding: 0.3em
    filter: 'drop-shadow(-2px 4px 2px #00000060)'
    transition: 0s
  .text:nth-child(2):
    top: auto
    bottom: 0
template: >-
  <div class="comp-e-instance" v-if="item" @click="$emit('click')"
  path="643573758."><ui-link class="instance" path="643573758.0"><div
  path="643573758.0.0"><ui-image ref="image1" :imageID="item.imageID ||
  item.generator?.imageID" @change="updateImageSize"
  path="643573758.0.0.0"></ui-image><div class="texts"
  path="643573758.0.0.1"><div class="text" v-for="(text, index) in [item.text0,
  item.text1]" v-text="text" :style="{ fontSize: fontSizes[index] }"
  path="643573758.0.0.1.0"></div></div><div class="spacer"
  path="643573758.0.0.2"></div></div></ui-link><e-post-create
  v-if="showCreatePost" :generator="$root.instanceToGenerator(item)"
  :entityID="item._id" path="643573758.1"></e-post-create></div>
