dom:
  ui.infinite.scroll:
    .stream:
      e.instance:
        v-for: instance in items
        v-bind: instance
        :key: instance.instanceID
    @scroll: loadMore
      # content.poem#1:
      #   ":lines": >-
      #     ['In a realm where grace and ease reside,', 'There exists a penguin with
      #     a timid stride,', 'A creature of social awkwardness, so profound,',
      #     'With every step, uncertainty is found.']
      # content.poem#2:
      #   ":lines": >-
      #     ['Oh, Socially Awkward Penguin, so endearingly shy,', 'Navigating a
      #     world where connections multiply,', 'In crowded gatherings, your heart
      #     skips a beat,', 'As you stumble through conversations, finding
      #     retreat.']
      # content.poem#3:
      #   ":lines": >-
      #     ['With feathers ruffled and eyes cast down,', 'You yearn for acceptance,
      #     yet wear a frown,', 'But within your awkwardness, a charm unfolds,', 'A
      #     vulnerability that captures hearts in its hold.']
      # content.poem#4:
      #   ":lines": >-
      #     ['Your hesitant words, like a hesitant dance,', 'Draw smiles and
      #     laughter, by happenstance,', 'For in your stumbling, we see our own
      #     plight,', 'And through your bumbling, our own fears take flight.']
name: content-stream

props:
  getMoreItems:

data:
  isLoading: false
  pageIndex: 0
  items: []

methods:
  loadMore: | #ts
    async function() {
      if (this.isLoading) return;
      this.isLoading = true;
      const newItems = await this.getMoreItems(this.pageIndex);
      this.pageIndex++;
      this.items.push(...newItems);
      this.isLoading = false;
      return;
    }

style:
  .stream:
    display: flex
    flex-direction: column
    gap: 4rem
