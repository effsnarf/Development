dom:
  site:
    v-if: $root.params.page=='instance'
    page-name: instance
    ':recommendation-items': recommendationItems
    template: 
      v-slot: left
      e.generator.search: null
    template: 
      v-slot: middle
      content.stream:
        item-type: e.instance
        ':item-props': '{ showFullFooter: true }'
        ':get-more-items': getMoreInstances
        grid-class: grid-1
data:
  instance: null
  generator: null
  recommendationItems: []
  isInited: false
mounted: | #js
  async function() {
    this.$watch(() => this.$root.params.instanceID, {
      handler: async () => {
        await this.init();
      },
      immediate: true
    });
  }
methods:
  init: | #js
    async function() {
      if (!this.$root.params.instanceID) return;
      const dbp = this.$root.dbp;
      this.instance = await dbp.instances.select.one(this.$root.params.instanceID);
      this.generator = await dbp.generators.select.one(this.instance.generatorID);
      this.recommendationItems = await dbp.generators.select.related(this.generator.urlName);
      if (this.$root.params.page == "instance") {
        this.$root.setDocumentTitle(this.$root.getInstanceText(instance));
      }
    }
  getMoreInstances: | #js
    async function(pageIndex) {
      // Wait until instance is loaded
      await this.$root.wait(() => this.instance);
      const items = await this.$root.dbp.instances.select.popular("en", pageIndex, this.instance?.urlName);
      if ((pageIndex == 0) && (this.instance)) items.unshift(this.instance);
      return items;
    }
style: null
name: page-instance
template: >-
  <site class="comp-page-instance" v-if="$root.params.page=='instance'"
  page-name="instance" :recommendation-items="recommendationItems"
  path="1375900948."><template v-slot:left
  path="1375900948.0"><e-generator-search></e-generator-search></template><template
  v-slot:middle path="1375900948.1"><content-stream item-type="e.instance"
  :item-props="{ showFullFooter: true }" :get-more-items="getMoreInstances"
  grid-class="grid-1" path="1375900948.1.0"></content-stream></template></site>
