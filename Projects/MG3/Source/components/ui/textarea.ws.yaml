dom:
  textarea:
    ':value': value
    ':placeholder': hint
    on_input: onInput
    on_focus: $emit('focus')
    on_blur: $emit('blur')
    on_keydown: onKeyDown
props:
  value: null
  hint: null
methods:
  onInput: |
    function(e) {
      const heightLimit = 200;
      const textarea = e.target;
      this.$emit('input', textarea.value);
      textarea.style.height = "";
      textarea.style.height = Math.min(textarea.scrollHeight, heightLimit) + "px";
    }
  onKeyDown: |
    (e) => {
      if (e.key == 'Tab') {
        e.preventDefault();
        let start = e.target.selectionStart;
        let end = e.target.selectionEnd;
        let value = e.target.value;
        e.target.value = value.substring(0, start) + "  " + value.substring(end);
        e.target.selectionStart = e.target.selectionEnd = start + 2;
      }
      return false;
    }
name: ui-textarea
template: >-
  <textarea class="comp-ui-textarea" :value="value" :placeholder="hint"
  @input="onInput" @focus="$emit('focus')" @blur="$emit('blur')"
  @keydown="onKeyDown"></textarea>
