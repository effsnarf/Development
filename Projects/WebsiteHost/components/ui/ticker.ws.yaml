dom:
  div:

props:
  interval:
  delay:
  count:
  enabled: true

data:
  started:
  tickIndex: 0

mounted: | #js
  function() {
    this.start();
  }

methods:
  start: | #js
    function() {
      const now = new Date();
      if (!this.started) this.started = Date.now();
      setTimeout(this.anotherTick.bind(this), (this.delay ?? 0));
    }
  tick: | #js
    function() {
      if (this.enabled) this.$emit("tick", this.tickIndex);
      if (this.count) this.tickIndex = (this.tickIndex + 1) % this.count;
    }
  anotherTick: | #js
    async function() {
      if (!this.interval) throw new Error("interval is required");
      this.tick();
      setTimeout(this.anotherTick.bind(this), this.interval);
    }
