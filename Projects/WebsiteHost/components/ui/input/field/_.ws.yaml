dom:
  div:
    .flex:
      table:
        tr:
          v-for: field in fields
          :class: "{ hoverable: true, selected: (field == value) }"
          @mouseenter: hovered = field
          @mouseleave: hovered = null
          @click: $emit('input', field)
          td:
            v-text: "'ðŸ§Š'"
          td:
            v-text: "field"
      div:
        v-if: active
        .value:
          v-for: item in [...dataItems].take(10)
          ui.value.preview:
            ':value': item[active]

props:
  dataItems:
  value:

data:
  fields:
  hovered:

methods:
  getFields: | #js
    function(dataItems) {
      if (!dataItems) return [];
      return dataItems
        .take(10)
        .flatMap(d => Object.keys(d??{}))
        .distinct();
    }

watch:
  hovered:
    handler: | #js
      function(hovered) {
        this.$emit('preview', hovered);
      }
  dataItems:
    immediate: true
    deep: false
    handler: | #js
      function(dataItems) {
        this.fields = this.getFields(dataItems);
      }

computed:
  active: | #js
    function() {
      return (this.hovered || this.value);
    }

style:
  .flex:
    max-width: 30em
  .flex > *:
    width: 50%
    overflow: hidden
    white-space: nowrap
  .flex tr, .value:
    height: 1.5em
    overflow: hidden
